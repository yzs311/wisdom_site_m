parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"XWlU":[function(require,module,exports) {
$(function(){var n=localStorage.getItem("pid"),i=$("body").height();$("body").height(i);var t,a,o,l=new AMap.Map("main",{zoom:12,center:[114.083372,22.544146]}),s=0;$(".nav").on("click",function(){0==s?($(".side-box").animate({left:"0"}),$(".search").animate({left:"135%"}),s=1):($(".side-box").animate({left:"-3.2rem"}),$(".search").animate({left:"50%"}),s=0)}),$("#search").on("input propertychange",function(){var i=$(this).val();$.ajax({type:"GET",url:"http://39.108.103.150:8989/lz/hire/localtionList",data:{id:n,string:i},dataType:"json",success:function(n){console.log(n);var i="";if(n.length>0){for(var t=0;t<n.length;t++)i+="<li data-name=".concat(n[t].hname,'>\n                            <div class="left-img"></div>\n                            <div class="content">\n                                <div class="name">\n                                    姓名：').concat(n[t].hname,'\n                                </div>\n                                <div class="company">\n                                    所属公司：').concat(n[t].laowu,'\n                                </div>\n                                <div class="location">\n                                    所属工区：').concat(n[t].areaList[0].name,'\n                                </div>\n                            </div>\n                            <div class="right-img"></div>\n                        </li>');$("#searchList").html(i),$(".search-data").css("display","block")}else $("#searchList").html('<li style="border-bottom:none">\n                            <div class="content" style="line-height:.7rem; text-align:center; font-size:.16rem">\n                                无相关人员\n                            </div>\n                        </li>'),$(".search-data").css("display","block")}}),""==i&&$(".search-data").css("display","none")}),$("#searchList").on("click","li",function(){var i=$(this).data("name");$(".history-box").css("display","none"),$.ajax({type:"GET",url:"http://39.108.103.150:8989/lz/hire/localtionList",data:{id:n,string:i},dataType:"json",success:function(s){if(s.length>0)if(s[0].localtionList.length>0){var c=[],e=[];c.push(s[0].areaList[0].xloc),c.push(s[0].areaList[0].yloc),e.push(s[0].localtionList[0].xloc),e.push(s[0].localtionList[0].yloc),$(".data-box").css("display","block"),$(".search-data").css("display","none"),t=new AMap.Marker({position:e}),l.add(t),a=new AMap.Circle({center:c,radius:s[0].areaList[0].radius,fillColor:"none",fillOpacity:0,strokeColor:"#3979fe",strokeWeight:2}),l.add(a),l.setZoomAndCenter(13,c),$("#dataBox").html('<div class="top-box">\n                            <div class="list-box">\n                                <ul>\n                                    <li class="name">\n                                        姓名：'.concat(s[0].hname,"\n                                    </li>\n                                    <li>\n                                        电话：").concat(s[0].phone,"\n                                    </li>\n                                    <li>\n                                        所属公司：").concat(s[0].laowu,"\n                                    </li>\n                                    <li>\n                                        设备编号：").concat(s[0].imei,"\n                                    </li>\n                                    <li>\n                                        定位时间：").concat(s[0].localtionList[0].createDate,"\n                                    </li>\n                                    <li>\n                                        定位地址：").concat(s[0].localtionList[0].address,'\n                                    </li>\n                                </ul>\n                            </div>\n                        </div>\n                        <div class="bottom-box">\n                            <div class="electric">\n                                电量：').concat(s[0].localtionList[0].bat,'%\n                            </div>\n                            <div class="refresh">\n                                刷新定位\n                            </div>\n                            <div class="switchover" id="history" >\n                                历史轨迹\n                            </div>\n                        </div>'));var r=new datePicker;r.init({trigger:"#history",type:"date",minDate:"1900-1-1",maxDate:"2100-12-31",onSubmit:function(){var a=r.value;$.ajax({type:"GET",url:"http://39.108.103.150:8989/lz/hire/localtionList",data:{id:n,string:i,createDate:a},dataType:"json",success:function(n){$(".data-box").css("display","none"),$(".history-box").css("display","block");var i=[],a=[],s=[];i.push(n[0].areaList[0].xloc),i.push(n[0].areaList[0].yloc);for(var c=0;c<n[0].localtionList.length;c++)(a=[]).push(n[0].localtionList[n[0].localtionList.length-1-c].xloc),a.push(n[0].localtionList[n[0].localtionList.length-1-c].yloc),s.push(a);o=new AMap.Polyline({path:s,lineJoin:"round",showDir:!0,strokeWeight:3,strokeColor:"#3366ff"}),l.add(o),l.remove(t),l.setZoomAndCenter(13,i),$("#historyBox").html('<div class="top-box" id="historyTop">\n                                            <div class="pull-up"></div>\n                                            <div class="list-box">\n                                                <ul>\n                                                    <li class="name">\n                                                        姓名：'.concat(n[0].hname,"\n                                                    </li>\n                                                    <li>\n                                                        电话：").concat(n[0].phone,"\n                                                    </li>\n                                                    <li>\n                                                        所属公司：").concat(n[0].laowu,"\n                                                    </li>\n                                                    <li>\n                                                        设备编号：").concat(n[0].imei,'\n                                                    </li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                        <div class="middle-box" id="historyMiddle">\n                                            <div class="enter">\n                                                <div class="img-box"></div>\n                                                <ul>\n                                                    <li>\n                                                        设备电量：').concat(n[0].localtionList[0].bat,"%\n                                                    </li>\n                                                    <li>\n                                                        时间：").concat(n[0].localtionList[0].createDate,"\n                                                        <br>\n\n                                                    </li>\n                                                    <li>\n                                                        位置：").concat(n[0].localtionList[0].address,'\n                                                    </li>\n                                                </ul>\n                                            </div>\n                                            <div class="come">\n                                                <div class="img-box"></div>\n                                                <ul>\n                                                    <li>\n                                                        设备电量：').concat(n[0].localtionList[n[0].localtionList.length-1].bat,"%\n                                                    </li>\n                                                    <li>\n                                                        时间：").concat(n[0].localtionList[n[0].localtionList.length-1].createDate,"\n                                                        <br>\n\n                                                    </li>\n                                                    <li>\n                                                        位置：").concat(n[0].localtionList[n[0].localtionList.length-1].address,'\n                                                    </li>\n                                                </ul>\n                                            </div>\n                                        </div>\n                                        <div class="bottom-box">\n                                            <div class="electric">\n                                                电量：').concat(n[0].localtionList[0].bat,'%\n                                            </div>\n                                            <div class="refresh">\n                                                刷新定位\n                                            </div>\n                                            <div class="switchover" id="particular">\n                                                个人详情\n                                            </div>\n                                        </div>'))}})},onClose:function(){}})}else alert("此设备已关机！");else alert("此设备已关机！")}})}),$("#historyBox").on("click","#particular",function(){$(".data-box").css("display","block"),$(".history-box").css("display","none"),l.add(t),l.remove(o)});var c=1;$("#historyBox").on("click","#historyTop",function(){1==c?($("#historyMiddle").animate({height:"1.705rem"}),$(".pull-up").css("transform","rotate(180deg)"),c=0):($("#historyMiddle").animate({height:"0"}),$(".pull-up").css("transform","rotate(0deg)"),c=1)}),$.ajax({type:"GET",url:"http://39.108.103.150:8989/lz/project/listzh",data:{id:n},dataType:"json",success:function(i){$("#sideBox").html('<div class="project" id="project">\n                    '.concat(i.title,'\n                    <i class="blue-v"></i>\n                </div>'));for(var c=$("#project").html(),e=0;e<i.areaList.length;e++)c+='<div class="sub-project" id="subProject'.concat(e,'">\n                    ').concat(i.areaList[e].name,'\n                    <i class="black-v"></i>\n                    <div class="name-box">\n                        \n                    </div>\n                </div>');$("#project").html(c);for(var r=$("#subProject0").height(),d=($("#subProject0 .name-box").height(),0),h=0,v=function(c){for(var e="",v=0;v<i.areaList[c].hireList.length;v++)e+='<div class="name" data-name='.concat(i.areaList[c].hireList[v].hname,">\n                        <span>").concat(i.areaList[c].hireList[v].hname,"</span>\n                        <span class=").concat(null!=i.areaList[c].hireList[v].xloc?"online":"offline",">").concat(null!=i.areaList[c].hireList[v].xloc?"在线":"不在线","</span>\n                    </div>");$("#subProject".concat(c," .name-box")).html(e),d+=$("#subProject".concat(c)).height(),h+=$("#subProject".concat(c," .name-box")).height();var p=$("#project").height(),u=1,m=1;$("#project").on("click",function(n){n.stopPropagation(),1==u?($("#project").animate({height:p+d+h+"px"}),u=0,$(".blue-v").addClass("rotate")):($("#project").animate({height:p+"px"}),$(".blue-v").removeClass("rotate"),u=1)}),$("#subProject".concat(c)).on("click",function(n){n.stopPropagation(),1==m?($("#subProject".concat(c)).animate({height:d+h+"px"}),$("#subProject".concat(c," .black-v")).addClass("rotate"),m=0):($("#subProject".concat(c)).animate({height:r+"px"}),$("#subProject".concat(c," .black-v")).removeClass("rotate"),m=1)}),$(".name").on("click",function(i){i.stopPropagation();var c=$(this).data("name");$(".history-box").css("display","none"),$.ajax({type:"GET",url:"http://39.108.103.150:8989/lz/hire/localtionList",data:{id:n,string:c},dataType:"json",success:function(i){if(i.length>0)if(i[0].localtionList.length>0){$(".side-box").animate({left:"-3.2rem"}),$(".search").animate({left:"50%"}),s=0;var e=[],r=[];e.push(i[0].areaList[0].xloc),e.push(i[0].areaList[0].yloc),r.push(i[0].localtionList[0].xloc),r.push(i[0].localtionList[0].yloc),$(".data-box").css("display","block"),$(".search-data").css("display","none"),t=new AMap.Marker({position:r}),l.add(t),a=new AMap.Circle({center:e,radius:i[0].areaList[0].radius,fillColor:"none",fillOpacity:0,strokeColor:"#3979fe",strokeWeight:2}),l.add(a),l.setZoomAndCenter(13,e),$("#dataBox").html('<div class="top-box">\n                                        <div class="list-box">\n                                            <ul>\n                                                <li class="name">\n                                                    姓名：'.concat(i[0].hname,"\n                                                </li>\n                                                <li>\n                                                    电话：").concat(i[0].phone,"\n                                                </li>\n                                                <li>\n                                                    所属公司：").concat(i[0].laowu,"\n                                                </li>\n                                                <li>\n                                                    设备编号：").concat(i[0].imei,"\n                                                </li>\n                                                <li>\n                                                    定位时间：").concat(i[0].localtionList[0].createDate,"\n                                                </li>\n                                                <li>\n                                                    定位地址：").concat(i[0].localtionList[0].address,'\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                    <div class="bottom-box">\n                                        <div class="electric">\n                                            电量：').concat(i[0].localtionList[0].bat,'%\n                                        </div>\n                                        <div class="refresh">\n                                            刷新定位\n                                        </div>\n                                        <div class="switchover" id="history" >\n                                            历史轨迹\n                                        </div>\n                                    </div>'));var d=new datePicker;d.init({trigger:"#history",type:"date",minDate:"1900-1-1",maxDate:"2100-12-31",onSubmit:function(){var i=d.value;$.ajax({type:"GET",url:"http://39.108.103.150:8989/lz/hire/localtionList",data:{id:n,string:c,createDate:i},dataType:"json",success:function(n){$(".data-box").css("display","none"),$(".history-box").css("display","block");var i=[],a=[],s=[];i.push(n[0].areaList[0].xloc),i.push(n[0].areaList[0].yloc);for(var c=0;c<n[0].localtionList.length;c++)(a=[]).push(n[0].localtionList[n[0].localtionList.length-1-c].xloc),a.push(n[0].localtionList[n[0].localtionList.length-1-c].yloc),s.push(a);o=new AMap.Polyline({path:s,lineJoin:"round",showDir:!0,strokeWeight:3,strokeColor:"#3366ff"}),l.add(o),l.remove(t),l.setZoomAndCenter(13,i),$("#historyBox").html('<div class="top-box" id="historyTop">\n                                                        <div class="pull-up"></div>\n                                                        <div class="list-box">\n                                                            <ul>\n                                                                <li class="name">\n                                                                    姓名：'.concat(n[0].hname,"\n                                                                </li>\n                                                                <li>\n                                                                    电话：").concat(n[0].phone,"\n                                                                </li>\n                                                                <li>\n                                                                    所属公司：").concat(n[0].laowu,"\n                                                                </li>\n                                                                <li>\n                                                                    设备编号：").concat(n[0].imei,'\n                                                                </li>\n                                                            </ul>\n                                                        </div>\n                                                    </div>\n                                                    <div class="middle-box" id="historyMiddle">\n                                                        <div class="enter">\n                                                            <div class="img-box"></div>\n                                                            <ul>\n                                                                <li>\n                                                                    设备电量：').concat(n[0].localtionList[0].bat,"%\n                                                                </li>\n                                                                <li>\n                                                                    时间：").concat(n[0].localtionList[0].createDate,"\n                                                                    <br>\n                                                \n                                                                </li>\n                                                                <li>\n                                                                    位置：").concat(n[0].localtionList[0].address,'\n                                                                </li>\n                                                            </ul>\n                                                        </div>\n                                                        <div class="come">\n                                                            <div class="img-box"></div>\n                                                            <ul>\n                                                                <li>\n                                                                    设备电量：').concat(n[0].localtionList[n[0].localtionList.length-1].bat,"%\n                                                                </li>\n                                                                <li>\n                                                                    时间：").concat(n[0].localtionList[n[0].localtionList.length-1].createDate,"\n                                                                    <br>\n                                                \n                                                                </li>\n                                                                <li>\n                                                                    位置：").concat(n[0].localtionList[n[0].localtionList.length-1].address,'\n                                                                </li>\n                                                            </ul>\n                                                        </div>\n                                                    </div>\n                                                    <div class="bottom-box">\n                                                        <div class="electric">\n                                                            电量：').concat(n[0].localtionList[0].bat,'%\n                                                        </div>\n                                                        <div class="refresh">\n                                                            刷新定位\n                                                        </div>\n                                                        <div class="switchover" id="particular">\n                                                            个人详情\n                                                        </div>\n                                                    </div>'))}})},onClose:function(){}})}else alert("此设备已关机！");else alert("此设备已关机！")}})})},p=0;p<i.areaList.length;p++)v(p)}})});
},{}]},{},["XWlU"], null)
//# sourceMappingURL=/location.fbcb8a5b.map