{"version":3,"sources":["js/information.js"],"names":["$","pid","localStorage","getItem","folderDataList","fileDataList","parentId","setList","folderHtml","fileHtml","i","length","folderId","folderName","fileId","fileName","fileSize","createTime","html","css","axios","post","then","res","printobj","obj","k","push","children","data","rows","on","location","href"],"mappings":";AAAAA,EAAE,WACMC,IAAAA,EAAMC,aAAaC,QAAQ,OAC3BC,EAAiB,GACjBC,EAAe,GACfC,EAAW,EAgCNC,SAAAA,EAAQD,GAKR,IAJDE,IAAAA,EAAa,GACbC,EAAW,GAGNC,EAAI,EAAGA,EAAIN,EAAeO,OAAQD,IAEnCN,EAAeM,GAAGJ,UAAYA,IAC9BE,GACyBJ,qBAAAA,OAAAA,EAAeM,GAAGE,SAGvBR,+IAAAA,OAAAA,EAAeM,GAAGG,WAJtC,yHAYH,IAAA,IAAIH,EAAI,EAAGA,EAAIL,EAAaM,OAAQD,IAEjCL,EAAaK,GAAGE,UAAYN,IAC5BG,GACuBJ,mBAAAA,OAAAA,EAAaK,GAAGI,OAGTT,kKAAAA,OAAAA,EAAaK,GAAGK,SACbV,yDAAAA,OAAAA,EAAaK,GAAGM,SAAcX,OAAAA,OAAAA,EAAaK,GAAGO,WAL/E,sHAYRjB,EAAE,YAAYkB,KAAKV,GACnBR,EAAE,YAAYkB,KAAKT,GAEH,IAAZD,GAA4B,IAAVC,EAElBT,EAAE,YAAYmB,IAAI,UAAU,SAE5BnB,EAAE,YAAYmB,IAAI,UAAU,QAvEpCC,MAAMC,KAAmEpB,8DAAAA,OAAAA,IAAOqB,KAC5E,SAAAC,IAIaC,SAAAA,EAASC,GACV,IAAA,IAAIC,KAAKD,EAETrB,EAAeuB,KAAKF,EAAIC,IAC9BD,EAAIC,GAAGE,SAASjB,OAAS,GACfa,EAASC,EAAIC,GAAGE,UAN5BJ,CAASD,EAAIM,QAcrBT,MAAMC,KAAoFpB,+EAAAA,OAAAA,IAAOqB,KAC7F,SAAAC,GAEIlB,EAAekB,EAAIM,KAAKC,KACxBvB,EAAQD,KAsDhBN,EAAE,YAAY+B,GAAG,QAAQ,KAAK,WAG1BxB,EADAD,EAAWN,EAAE,MAAM6B,KAAK,eAK5B7B,EAAE,YAAY+B,GAAG,QAAQ,KAAK,WAG1BC,SAASC,KAA2DjC,sDAAAA,OAAAA,EAAE,MAAM6B,KAAK,aAIrF7B,EAAE,WAAW+B,GAAG,QAAQ,WACf,IAAA,IAAIrB,EAAI,EAAGA,EAAIN,EAAeO,OAAQD,IACnCN,EAAeM,GAAGE,UAAYN,IAE9BA,EAAWF,EAAeM,GAAGJ,UAGrCC,EAAQD","file":"information.11a92a2b.map","sourceRoot":"..\\..","sourcesContent":["$(function () {\r\n    let pid = localStorage.getItem('pid')\r\n    let folderDataList = []\r\n    let fileDataList = []\r\n    let parentId = 0\r\n\r\n    // 遍历文件夹列表\r\n    axios.post(`http://39.108.103.150:8989/lz/folder/queryFolder?projectId=${pid}`).then(\r\n        res => {\r\n            // folderData = res.data\r\n            // console.log(res.data)\r\n            printobj(res.data)\r\n            function printobj(obj){\r\n                for(var k in obj){//遍历对象和数组\r\n                    // console.log(obj[k])\r\n                    folderDataList.push(obj[k])\r\n\t\t\t        if(obj[k].children.length > 0){  // 判断如果children里有内容则递归\r\n                        printobj(obj[k].children)\r\n\t\t\t        }\r\n                }\r\n            }\r\n        }\r\n    )\r\n\r\n    // 遍历文件列表\r\n    axios.post(`http://39.108.103.150:8989/lz/file/queryFile?page=1&pageSize=10000&uploader=${pid}`).then(\r\n        res => {\r\n            // console.log(res.data.rows)\r\n            fileDataList = res.data.rows\r\n            setList(parentId)\r\n        }\r\n    )\r\n\r\n    // console.log(folderDataList)\r\n    \r\n    // 渲染列表\r\n    function setList(parentId) {\r\n        let folderHtml = ''\r\n        let fileHtml = ''\r\n\r\n        // 将文件夹数据添加到页面中\r\n        for (let i = 0; i < folderDataList.length; i++) {\r\n            // console.log(folderDataList[i])\r\n            if (folderDataList[i].parentId == parentId) {\r\n                folderHtml += \r\n                    `<li data-folderId=${folderDataList[i].folderId}>\r\n                        <div class=\"icon-box\"></div>\r\n                        <div class=\"text-box\">\r\n                            <span>${folderDataList[i].folderName}</span>\r\n                        </div>\r\n                        <div class=\"line\"></div>\r\n                    </li>`\r\n            }\r\n        }\r\n\r\n        // 将文件数据添加到页面中\r\n        for (let i = 0; i < fileDataList.length; i++) {\r\n            // console.log(fileDataList[i])\r\n            if (fileDataList[i].folderId == parentId) {\r\n                fileHtml += \r\n                    `<li data-fileId=${fileDataList[i].fileId}>\r\n                        <div class=\"icon-box pdf-icon\"></div>\r\n                        <div class=\"text-box\">\r\n                            <p class=\"name\">${fileDataList[i].fileName}</p>\r\n                            <p class=\"message\">${fileDataList[i].fileSize}KB ${fileDataList[i].createTime}</p>\r\n                        </div>\r\n                        <div class=\"line\"></div>\r\n                    </li>`\r\n            }\r\n        }\r\n\r\n        $('.tier ul').html(folderHtml)\r\n        $('.last ul').html(fileHtml)\r\n\r\n        if (folderHtml=='' && fileHtml=='') {\r\n            // console.log(`123`)\r\n            $('.no-data').css('display','block')\r\n        } else {\r\n            $('.no-data').css('display','none')\r\n        }\r\n    }\r\n\r\n    // 文件夹点击事件\r\n    $('.tier ul').on('click','li',function(){\r\n        // console.log($(this).data('folderid'))\r\n        parentId = $(this).data('folderid')\r\n        setList(parentId)\r\n    })\r\n\r\n    // 文件点击事件（下载）\r\n    $('.last ul').on('click','li',function () {\r\n        // 根据文件id调用下载接口\r\n        // console.log($(this).data('fileid'))\r\n        location.href=`http://39.108.103.150:8989/lz/file/download?fileId=${$(this).data('fileid')}`\r\n    })\r\n\r\n    // 返回点击事件\r\n    $('.return').on('click',function () {\r\n        for (let i = 0; i < folderDataList.length; i++) {\r\n            if (folderDataList[i].folderId == parentId) {\r\n                // console.log(folderDataList[i])\r\n                parentId = folderDataList[i].parentId\r\n            }\r\n        }\r\n        setList(parentId)\r\n    })\r\n})"]}