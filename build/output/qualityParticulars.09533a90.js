parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"0yUc":[function(require,module,exports) {
$(function(){var a=localStorage.getItem("pid"),n=o("type"),i=o("pollingId"),s=o("pollingDetailId"),t="",c="",l="";function o(a){var n=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(n);return null!=i?unescape(i[2]):null}$(".abarbeitung-button").on("click",function(a){a.stopPropagation(),l=1,$(".abarbeitung-box").css("display","block")});var e="";var d="";function r(){d='<div class="title">\n                '.concat(e.describex,'\n            </div>\n            <div class="justify">\n                <span>检查区域</span>\n                <span class="white-color">').concat(e.place,'</span>\n            </div>\n            <div class="justify">\n                <span>分包单位</span>\n                <span class="white-color">').concat(e.unitTitle,'</span>\n            </div>\n            <div class="border-bottom"></div>\n            <div class="justify">\n                <span>问题级别</span>\n                <span class="').concat(1==e.rank?"slight":2==e.rank?"ordinary":"severity",'">').concat(1==e.rank?"轻微":2==e.rank?"一般":"严重",'</span>\n            </div>\n            <div class="pic-box">\n                <img src="').concat(e.fileUrl,'" alt="">\n            </div>\n            <div class="justify">\n                <span>检查人</span>\n                <span class="white-color">某某某</span>\n            </div>\n            <div class="justify">\n                <span>检查时间</span>\n                <span class="white-color">').concat(e.createTime,'</span>\n            </div>\n            <div class="line"></div>\n            <div class="title">\n                整改通知\n            </div>\n            <div class="justify">\n                <span>整改人</span>\n                <span class="white-color">某某某</span>\n            </div>\n            <div class="justify">\n                <span>整改时限</span>\n                <span class="white-color">').concat(e.deadlineTime,'</span>\n            </div>\n            <div class="describe">\n                <p>整改要求</p>\n                <span>').concat(e.rectification,'</span>\n            </div>\n            <div class="line"></div>'),axios.post("http://39.108.103.150:8989/lz/polling/queryPollingIs?pollingId=".concat(i,"&type=").concat(n)).then(function(a){var n=1;console.log(a.data);for(var i=0;i<a.data.msg.length;i++)2!=a.data.msg[i].isAvailable&&1!=a.data.msg[i].isAvailable||(d+='<div class="title">\n                                第'.concat(n,'次整改\n                            </div>\n                            <div class="describe">\n                                <p>整改结果</p>\n                                <span>').concat(a.data.msg[i].describex,'</span>\n                            </div>\n                            <div class="name">\n                                整改后照片\n                            </div>\n                            <div class="pic-box" style="margin-bottom: .175rem">\n                                <img src="').concat(a.data.msg[i].fileUrl,'" alt="">\n                            </div>'),n++),6!=a.data.msg[i].isAvailable&&5!=a.data.msg[i].isAvailable||(d+='<div class="justify">\n                                <span>复查人</span>\n                                <span class="white-color">某某某</span>\n                            </div>\n                            <div class="justify">\n                                <span>复查意见</span>\n                                <span class="white-color">'.concat(6==a.data.msg[i].isAvailable?"不通过":"通过",'</span>\n                            </div>\n                            <div class="name">\n                                复查后照片\n                            </div>\n                            <div class="pic-box" style="margin-bottom: .25rem">\n                                <img src="').concat(a.data.msg[i].fileUrl,'" alt="">\n                            </div>\n                            <div class="line"></div>'));$(".centent-box").html(d)})}function p(){0==n?($(".state-box").html('<div class="state">\n                    待整改\n                </div>\n                <div class="time">\n                    创建时间： '.concat(e.createTime,"\n                </div>")).addClass("orange-color"),$(".abarbeitung-button").css("display","block"),$(".review-button").css("display","none")):1==n?$(".state-box").html('<div class="state">\n                    待复查\n                </div>\n                <div class="time">\n                    创建时间： '.concat(e.createTime,"\n                </div>")).addClass("orange-color"):2==n&&($(".state-box").html('<div class="state">\n                    已完成\n                </div>\n                <div class="time">\n                    创建时间： '.concat(e.createTime,"\n                </div>")).addClass("green-color"),$(".review-button").css("display","none"))}axios.post("http://39.108.103.150:8989/lz/polling/queryPolling?examineUserId=".concat(a,"&type=").concat(n)).then(function(a){for(var n=0;n<a.data.msg.length;n++)a.data.msg[n].pollingId==i&&(console.log(a.data.msg[n]),e=a.data.msg[n],r(),p())}),$(".addPic").on("click",function(){$(".camera").click()}),$(".camera").change(function(a){$(".addPic").css("display","none"),$(".uploading").css("display","block");var n=a.target.files[0];file=new FormData,file.append("file",n),axios.post("http://39.108.103.150:8989/lz/file/upload?folderName=1",file,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){$(".addPic").attr("src",a.data.data[0].fileimgurl),$(".addPic").css("display","block"),$(".uploading").css("display","none"),c=a.data.data[0].fileimgurl})}),$(".abarbeitung-affirm").on("click",function(n){n.stopPropagation(),t=$(".abarbeitung-box textarea").val(),axios.post("http://39.108.103.150:8989/lz/polling/updatePollingDetail?id=".concat(s,"&pollingId=").concat(i,"&examineUserid=").concat(a,"&describex=").concat(t,"&fileUrl=").concat(c,"&isAvailable=").concat(l)).then(function(a){console.log(a.data),"整改成功！等待审核"==a.data.msg?location="../components/quality.html":alert("数据上传失败！请重试")})}),$(".abarbeitung-cancel").on("click",function(a){a.stopPropagation(),console.log("123"),$(".abarbeitung-box").css("display","none")}),$(".review-button .pass").on("click",function(a){a.stopPropagation(),l=5,$(".review-box").css("display","block")}),$(".review-button .no-pass").on("click",function(a){a.stopPropagation(),l=6,$(".review-box").css("display","block")}),$(".review-addPic").on("click",function(){$(".review-camera").click()}),$(".review-camera").change(function(a){$(".review-addPic").css("display","none"),$(".review-uploading").css("display","block");var n=a.target.files[0];file=new FormData,file.append("file",n),axios.post("http://39.108.103.150:8989/lz/file/upload?folderName=1",file,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){$(".review-addPic").attr("src",a.data.data[0].fileimgurl),$(".review-addPic").css("display","block"),$(".review-uploading").css("display","none"),c=a.data.data[0].fileimgurl})}),$(".review-affirm").on("click",function(n){n.stopPropagation(),t=$(".review-box textarea").val(),axios.post("http://39.108.103.150:8989/lz/polling/updatePolling?id=".concat(s,"&pollingId=").concat(i,"&examineUserid=").concat(a,"&describex=").concat(t,"&fileUrl=").concat(c,"&isAvailable=").concat(l)).then(function(a){console.log(a.data),"审核成功！"==a.data.msg?location="../components/quality.html":alert("数据上传失败！请重试")})}),$(".review-cancel").on("click",function(a){a.stopPropagation(),console.log("123"),$(".review-box").css("display","none")})});
},{}]},{},["0yUc"], null)
//# sourceMappingURL=/qualityParticulars.09533a90.map