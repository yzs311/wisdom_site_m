{"version":3,"sources":["js/green.js"],"names":["$","pid","localStorage","getItem","on","event","stopPropagation","css","ajax","type","url","data","dataType","success","mydate","Date","hours","getHours","minutes","getMinutes","seconds","getSeconds","setInterval","time1","time2","html","week","wea","tem","tem2","win","city","sid","i","dustEmissionList","length","id","comments","newData","PM25","PM10","Temperature","Humidity","WindSpeed","Noise","swiper","Swiper","spaceBetween","slideTo","index","console","log","sb","kg","envirwarm","current"],"mappings":";AAAAA,EAAE,WAEMC,IAAAA,EAAMC,aAAaC,QAAQ,OAmF/BH,EAAE,YAAYI,GAAG,QAAQ,qBAAqB,SAACC,GAC3CA,EAAMC,kBAENN,EAAE,WAAWO,IAAI,UAAU,WAkB/BP,EAAEQ,KAAK,CACHC,KAAM,MACNC,IAAK,+CACLC,KAAM,CAACV,IAAIA,GACXW,SAAU,OACVC,QAAS,SAASF,GAEVG,IAAAA,EAAS,IAAIC,KAEbC,EAAQF,EAAOG,WACfC,EAAUJ,EAAOK,aACjBC,EAAUN,EAAOO,aAErBC,YAAY,WAEO,MADfF,IAEIA,EAAU,EACVF,KAEW,IAAXA,IACAA,EAAU,EACVF,KAES,IAATA,IACAA,EAAQ,GAERO,IAAAA,EAAQP,EAAM,GAAG,IAAIA,EAAMA,EAC3BQ,EAAQN,EAAQ,GAAG,IAAIA,EAAQA,EAGnClB,EAAE,YAAYyB,KAGAF,uGAAAA,OAAAA,EAAM,IAAIC,EAGVb,6GAAAA,OAAAA,EAAKA,KAAK,GAAGe,KAIVf,kLAAAA,OAAAA,EAAKA,KAAK,GAAGgB,IACbhB,yCAAAA,OAAAA,EAAKA,KAAK,GAAGiB,IAAOjB,KAAAA,OAAAA,EAAKA,KAAK,GAAGkB,KACdlB,4DAAAA,OAAAA,EAAKA,KAAK,GAAGmB,IAAI,GAMvCnB,0PAAAA,OAAAA,EAAKoB,KAIcpB,qMAAAA,OAAAA,EAAKA,KAAK,GAAGe,KAEzBf,0GAAAA,OAAAA,EAAKA,KAAK,GAAGgB,IACbhB,6CAAAA,OAAAA,EAAKA,KAAK,GAAGiB,IAAOjB,KAAAA,OAAAA,EAAKA,KAAK,GAAGkB,KACdlB,gEAAAA,OAAAA,EAAKA,KAAK,GAAGmB,IAAI,GAGxBnB,qJAAAA,OAAAA,EAAKA,KAAK,GAAGe,KAEzBf,0GAAAA,OAAAA,EAAKA,KAAK,GAAGgB,IACbhB,6CAAAA,OAAAA,EAAKA,KAAK,GAAGiB,IAAOjB,KAAAA,OAAAA,EAAKA,KAAK,GAAGkB,KACdlB,gEAAAA,OAAAA,EAAKA,KAAK,GAAGmB,IAAI,GAjCzD,0GAsCD,QAKX9B,EAAEQ,KAAK,CACHC,KAAM,MACNC,IAAK,kEACLC,KAAM,CAACV,IAAIA,GACXW,SAAU,OACVC,QAAS,SAASF,GAGT,IADDc,IAnLeO,EAmLfP,EAAO,GACFQ,EAAI,EAAGA,EAAItB,EAAKuB,iBAAiBC,OAAQF,IAC9CR,GAAsBd,cAAAA,OAAAA,EAAKuB,iBAAiBvB,EAAKuB,iBAAiBC,OAAO,EAAEF,GAAGG,GAAcH,aAAAA,OAAAA,EAAMtB,MAAAA,OAAAA,EAAKuB,iBAAiBvB,EAAKuB,iBAAiBC,OAAO,EAAEF,GAAGI,SAA1J,SArLeL,EAsLKrB,EAAKuB,iBAAiBvB,EAAKuB,iBAAiBC,OAAO,EAAEF,GAAGG,GArLpFpC,EAAEQ,KAAK,CACHC,KAAM,MACNC,IAAK,gEACLC,KAAM,CAACqB,IAAIA,GACXpB,SAAU,OACVC,QAAS,SAASF,GAEVc,IAAAA,EAAOzB,EAAE,YAAYyB,OACzBA,GAKMd,sMAAAA,OAAAA,EAAK2B,QAAQ,GAAGD,SAGG1B,uGAAAA,OAAAA,EAAK2B,QAAQ,GAAGC,KAAK,GAAG5B,EAAK2B,QAAQ,GAAGC,KAAK,GAAG5B,EAAK2B,QAAQ,GAAGC,KAAK,IAAI5B,EAAK2B,QAAQ,GAAGC,KAAK,IAAI5B,EAAK2B,QAAQ,GAAGC,KAAK,IAAI,SAAS,UAAU,WAAW,OAAO,OAAO,YAE/K5B,6EAAAA,OAAAA,EAAK2B,QAAQ,GAAGC,KAGR5B,iHAAAA,OAAAA,EAAK2B,QAAQ,GAAGE,KAAK,GAAG7B,EAAK2B,QAAQ,GAAGE,KAAK,GAAG7B,EAAK2B,QAAQ,GAAGE,KAAK,IAAI7B,EAAK2B,QAAQ,GAAGE,KAAK,IAAI7B,EAAK2B,QAAQ,GAAGE,KAAK,IAAI,SAAS,UAAU,WAAW,OAAO,OAAO,YAE/K7B,4EAAAA,OAAAA,EAAK2B,QAAQ,GAAGE,KAQnB7B,6SAAAA,OAAAA,EAAK2B,QAAQ,GAAGG,YAIhB9B,kJAAAA,OAAAA,EAAK2B,QAAQ,GAAGI,SAIhB/B,oJAAAA,OAAAA,EAAK2B,QAAQ,GAAGK,UAejBhC,yfAAAA,OAAAA,EAAK2B,QAAQ,GAAGM,MA9C7B,+GAmDA5C,EAAE,YAAYyB,KAAKA,GAGboB,IAAAA,EAAS,IAAIC,OAAO,UAAU,CAChCC,aAAe,KAInB/C,EAAE,WAAWI,GAAG,QAAQ,KAAK,SAASC,GAClCA,EAAMC,kBACNN,EAAE,WAAWO,IAAI,UAAU,QAC3BsC,EAAOG,QAAQhD,EAAE,MAAMiD,QAAS,KAAK,QAiH7CjD,EAAE,gBAAgByB,KAAKA,MAK/BzB,EAAEQ,KAAK,CACHC,KAAM,MACNC,IAAK,oEACLC,KAAM,CAACV,IAAIA,GACXW,SAAU,OACVC,QAAS,SAASF,GACduC,QAAQC,IAAIxC,GACZX,EAAE,eAAeyB,KAUOd,6ZAAAA,OAAAA,EAAKyC,GAKoBzC,oPAAAA,OAAS,GAATA,EAAK0C,GAAM,IAAI,IAGlC1C,yIAAAA,OAAAA,EAAK2C,UAAU,GAAG,sBAAsB,kBAChD3C,wCAAAA,OAAAA,EAAK2C,UAIE3C,8KAAAA,OAAAA,EAAK4C,QAAQ,IAAI,sBAAsB,kBAC9C5C,uCAAAA,OAAAA,EAAK4C,QA1BP,4NAoCJ,IAAIT,OAAO,WAAW,CAClCC,aAAe","file":"green.600c13bc.map","sourceRoot":"..\\..","sourcesContent":["$(function(){\r\n    // console.log('hello world')\r\n    let pid = localStorage.getItem('pid')\r\n    // console.log(pid)\r\n\r\n\r\n    // 获取扬尘监测设备数据\r\n    let getDustEmissionData = (sid) =>{\r\n        $.ajax({\r\n            type: \"GET\",\r\n            url: \"http://39.108.103.150:8989/dustEmission/get/DustEmissionDatas\",\r\n            data: {sid:sid},\r\n            dataType: \"json\",\r\n            success: function(data){\r\n                // console.log(data)\r\n                let html = $('#dustBox').html()\r\n                html += \r\n                `<div class=\"slide-box swiper-slide\">\r\n                    <!-- 扬尘监测 -->\r\n                    <div class=\"environment\">\r\n                <div class=\"environment-title\">\r\n                    ${data.newData[0].comments}\r\n                </div>\r\n                <div class=\"PM\">\r\n                    <div class=\"subPM1 ${data.newData[0].PM25>50?data.newData[0].PM25>75?data.newData[0].PM25>150?data.newData[0].PM25>250?data.newData[0].PM25>300?'severe':'serious':'moderate':'mild':'good':'excellent'}\">\r\n                        <p>PM2.5</p>\r\n                        <span> ${data.newData[0].PM25}</span>\r\n                        <i></i>\r\n                    </div>\r\n                    <div class=\"subPM2 ${data.newData[0].PM10>50?data.newData[0].PM10>75?data.newData[0].PM10>150?data.newData[0].PM10>250?data.newData[0].PM10>300?'severe':'serious':'moderate':'mild':'good':'excellent'}\">\r\n                        <p>PM10</p>\r\n                        <span> ${data.newData[0].PM10}</span>\r\n                        <i></i>\r\n                    </div>\r\n                </div>\r\n                <div class=\"pollute\"></div>\r\n                <div class=\"environment-data\">\r\n                    <div class=\"temperature\">\r\n                        <p>气温</p>\r\n                        <p> ${data.newData[0].Temperature}℃</p>\r\n                    </div>\r\n                    <div class=\"humidity\">\r\n                        <p>湿度</p>\r\n                        <p> ${data.newData[0].Humidity}%</p>\r\n                    </div>\r\n                    <div class=\"wind-speed\">\r\n                        <p>风速</p>\r\n                        <p> ${data.newData[0].WindSpeed}m/s</p>\r\n                    </div>\r\n                </div>\r\n                    </div>\r\n                    <!-- 噪音监测 -->\r\n                    <div class=\"noise\">\r\n                <div class=\"noise-title\">\r\n                    <i class=\"shade\"></i>\r\n                    噪音检测\r\n                </div>\r\n                <div class=\"noise-state\">\r\n                    <p>正常</p>\r\n                </div>\r\n                <div class=\"noise-data\">\r\n                    实时数据：\r\n                    <span> ${data.newData[0].Noise}</span>\r\n                    dB\r\n                </div>\r\n                    </div>\r\n                </div>`\r\n                $('#dustBox').html(html)\r\n\r\n                // 初始化环境监测滚动\r\n                const swiper = new Swiper('#swiper',{\r\n                    spaceBetween : 30,\r\n                })\r\n\r\n                // 选择设备\r\n                $('.selech').on('click','li',function(event){\r\n                    event.stopPropagation()\r\n                    $('.selech').css('display','none')\r\n                    swiper.slideTo($(this).index(), 500, false)\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    // 显示选择框\r\n    $('#dustBox').on('click','.environment-title',(event)=>{\r\n        event.stopPropagation()\r\n        // console.log(`选择栏出现`)\r\n        $('.selech').css('display','block')\r\n    })\r\n\r\n    // 选择设备\r\n    // $('.selech').on('click','li',function(event){\r\n    //     event.stopPropagation()\r\n    //     $('.selech').css('display','none')\r\n    //     // console.log(this.id)\r\n    //     // console.log($(`#${this.id}`).html())\r\n    //     // $(`#${this.id}`).on('click',(event)=>{\r\n    //     //     event.stopPropagation()\r\n    //     //     swiper.slideTo(0, 1000, false)\r\n    //     //     // $('.selech').css('display','none')\r\n    //     // })\r\n    //     swiper.slideTo(0, 1000, false)\r\n    // })\r\n\r\n    // 获取天气数据\r\n    $.ajax({\r\n        type: \"GET\",\r\n        url: \"http://39.108.103.150:8989/lz/get/getWeather\",\r\n        data: {pid:pid},\r\n        dataType: \"json\",\r\n        success: function(data){\r\n            // console.log(data)\r\n            let mydate = new Date()\r\n            // console.log(mydate.getHours()+':'+mydate.getMinutes()+':'+mydate.getSeconds())\r\n            let hours = mydate.getHours()\r\n            let minutes = mydate.getMinutes()\r\n            let seconds = mydate.getSeconds()\r\n            // 开启计算器更新时间\r\n            setInterval(() => {\r\n                seconds++\r\n                if (seconds == 60) {\r\n                    seconds = 0\r\n                    minutes++\r\n                }\r\n                if (minutes == 60) {\r\n                    minutes = 0\r\n                    hours++\r\n                }\r\n                if (hours == 24) {\r\n                    hours = 0\r\n                }\r\n                let time1 = hours<10?'0'+hours:hours\r\n                let time2 = minutes<10?'0'+minutes:minutes\r\n                let time3 = seconds<10?'0'+seconds:seconds\r\n                // 渲染天气预报模块\r\n                $('#weather').html(\r\n                    `<div class=\"weather-left\">\r\n                        <div class=\"time\">\r\n                            ${time1+':'+time2}\r\n                        </div>\r\n                        <div class=\"day\">\r\n                            ${data.data[0].week}\r\n                        </div>\r\n                        <div class=\"weather-data\">\r\n                            <i class=\"weather-img\"></i>\r\n                            <p>${data.data[0].wea}</p>\r\n                            <p>${data.data[0].tem}~${data.data[0].tem2}</p>\r\n                            <p class=\"weather-bg\">${data.data[0].win[0]}</p>\r\n                            <i class=\"line\"></i>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"weather-right\">\r\n                        <div class=\"weather-title\">\r\n                            ${data.city}市天气预报\r\n                        </div>\r\n                        <div class=\"weather-box\">\r\n                            <div class=\"weather-data\">\r\n                                <p class=\"day\">${data.data[1].week}</p>\r\n                                <i class=\"weather-img\"></i>\r\n                                <p>${data.data[1].wea}</p>\r\n                                <p>${data.data[1].tem}~${data.data[1].tem2}</p>\r\n                                <p class=\"weather-bg\">${data.data[1].win[0]}</p>\r\n                            </div>\r\n                            <div class=\"weather-data\">\r\n                                <p class=\"day\">${data.data[2].week}</p>\r\n                                <i class=\"weather-img\"></i>\r\n                                <p>${data.data[2].wea}</p>\r\n                                <p>${data.data[2].tem}~${data.data[2].tem2}</p>\r\n                                <p class=\"weather-bg\">${data.data[2].win[0]}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>`\r\n                )\r\n            }, 1000)\r\n        }\r\n    })\r\n\r\n    // 获取设备名称与设备编号\r\n    $.ajax({\r\n        type: \"GET\",\r\n        url: \"http://39.108.103.150:8989/dustEmission/get/getDustEmissionList\",\r\n        data: {pid:pid},\r\n        dataType: \"json\",\r\n        success: function(data) {\r\n            // console.log(data.dustEmissionList)\r\n            let html = ''\r\n            for (let i = 0; i < data.dustEmissionList.length; i++) {\r\n                html += `<li id=\"sid${data.dustEmissionList[data.dustEmissionList.length-1-i].id}\" index=\"${i}\">${data.dustEmissionList[data.dustEmissionList.length-1-i].comments}</li>`\r\n                getDustEmissionData(data.dustEmissionList[data.dustEmissionList.length-1-i].id)\r\n            }\r\n            $('.dust-selech').html(html)\r\n        }\r\n    })\r\n\r\n    // 获取智能电箱设备数据\r\n    $.ajax({\r\n        type: \"GET\",\r\n        url: \"http://39.108.103.150:8989/electricityBox/get/getElectricBoxState\",\r\n        data: {pid:pid},\r\n        dataType: \"json\",\r\n        success: function(data) {\r\n            console.log(data)\r\n            $('#electicBox').html(\r\n                `<div class=\"slide-box swiper-slide\">\r\n                    <div class=\"electic\" >\r\n                        <div class=\"electic-title\">\r\n                            <i class=\"shade\"></i>\r\n                            用电管理\r\n                        </div>\r\n                        <div class=\"this-month\">\r\n                            <i></i>\r\n                            电箱运行状态：\r\n                            <span>${data.sb}</span>\r\n                        </div>\r\n                        <div class=\"electic-box\">\r\n                            <div class=\"today\">\r\n                                &nbsp;\r\n                                <p style=\"font-size:.2rem\">${data.kg==0?'关':'开'}</p>\r\n                                <span>箱门开关</span>\r\n                            </div>\r\n                            <div class=\"${data.envirwarm<45?'electic-temperature':'electic-leakage'}\">\r\n                                ${data.envirwarm}\r\n                                <p>℃</p>\r\n                                <span>电箱温度</span>\r\n                            </div>\r\n                            <div class=${data.current<150?'electic-temperature':'electic-leakage'}>\r\n                                ${data.current}\r\n                                <p>kwh</p>\r\n                                <span>电箱漏电</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>`\r\n            )\r\n\r\n            // 初始化用电管理滚动\r\n            const swiper2 = new Swiper('#swiper2',{\r\n                spaceBetween : 30,\r\n            })\r\n        }\r\n    })\r\n\r\n})"]}