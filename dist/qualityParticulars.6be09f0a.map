{"version":3,"sources":["js/qualityParticulars.js"],"names":["$","pid","localStorage","getItem","type","getQueryString","pollingId","pollingDetailId","describex","fileUrl","isAvailable","on","event","stopPropagation","css","name","reg","RegExp","r","window","location","search","substr","match","unescape","getQueryPollingIs","axios","post","then","res","number","console","log","data","i","msg","length","html","polling","getQueryPolling","setCentent","setState","place","unitTitle","rank","createTime","deadlineTime","rectification","click","change","e","headers","temp","target","files","file","FormData","append","attr","fileimgurl","val","alert","addClass"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,CAAC,CAAC,YAAW;AACT,MAAIC,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAV,CADS,CAGT;;AACA,MAAIC,IAAI,GAAGC,cAAc,CAAC,MAAD,CAAzB,CAJS,CAI+C;;AACxD,MAAIC,SAAS,GAAGD,cAAc,CAAC,WAAD,CAA9B,CALS,CAK+C;;AACxD,MAAIE,eAAe,GAAGF,cAAc,CAAC,iBAAD,CAApC,CANS,CAM+C;;AACxD,MAAIG,SAAS,GAAG,EAAhB,CAPS,CAO+C;;AACxD,MAAIC,OAAO,GAAG,EAAd,CARS,CAQ+C;;AACxD,MAAIC,WAAW,GAAG,EAAlB,CATS,CAS+C;AAExD;AACA;;AACAV,EAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBW,EAAzB,CAA4B,OAA5B,EAAoC,UAASC,KAAT,EAAe;AAC/CA,IAAAA,KAAK,CAACC,eAAN;AACAH,IAAAA,WAAW,GAAG,CAAd;AACAV,IAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBc,GAAtB,CAA0B,SAA1B,EAAoC,OAApC;AACH,GAJD,EAbS,CAmBT;;AACA,WAAST,cAAT,CAAwBU,IAAxB,EAA8B;AAC1B,QAAIC,GAAG,GAAG,IAAIC,MAAJ,CAAW,UAAUF,IAAV,GAAiB,eAA5B,EAA6C,GAA7C,CAAV;AACA,QAAIG,CAAC,GAAGC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,MAAvB,CAA8B,CAA9B,EAAiCC,KAAjC,CAAuCP,GAAvC,CAAR;;AACA,QAAIE,CAAC,IAAI,IAAT,EAAe;AACX,aAAOM,QAAQ,CAACN,CAAC,CAAC,CAAD,CAAF,CAAf;AACH;;AACD,WAAO,IAAP;AACH,GA3BQ,CA6BT;;;AACA,WAASO,iBAAT,GAA6B;AACzB;AACA;AACAC,IAAAA,KAAK,CAACC,IAAN,0EAA6ErB,SAA7E,mBAA+FF,IAA/F,GAAuGwB,IAAvG,CACI,UAAAC,GAAG,EAAI;AACH,UAAIC,MAAM,GAAG,CAAb;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAhB;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaC,MAAjC,EAAyCF,CAAC,EAA1C,EAA8C;AAC1C,YAAIL,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,EAAgBxB,WAAhB,IAA+B,CAA/B,IAAoCmB,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,EAAgBxB,WAAhB,IAA+B,CAAvE,EAA0E;AACtE2B,UAAAA,IAAI,2EAEOP,MAFP,kOAMYD,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,EAAgB1B,SAN5B,iVAYgBqB,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,EAAgBzB,OAZhC,qDAAJ;AAcIqB,UAAAA,MAAM;AACb;;AACD,YAAID,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,EAAgBxB,WAAhB,IAA+B,CAA/B,IAAoCmB,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,EAAgBxB,WAAhB,IAA+B,CAAvE,EAA0E;AACtE2B,UAAAA,IAAI,2ZAOgCR,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,EAAgBxB,WAAhB,IAA+B,CAA/B,GAAiC,KAAjC,GAAuC,IAPvE,gVAagBmB,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,EAAgBzB,OAbhC,6GAAJ;AAgBH;AACJ;;AACDT,MAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBqC,IAAlB,CAAuBA,IAAvB;AACH,KA1CL;AA4CH,GA7EQ,CA+ET;AAEA;;;AACA,MAAIC,OAAO,GAAG,EAAd;;AACA,WAASC,eAAT,GAA2B;AACvBb,IAAAA,KAAK,CAACC,IAAN,4EAA+E1B,GAA/E,mBAA2FG,IAA3F,GAAmGwB,IAAnG,CACI,UAAAC,GAAG,EAAI;AACH;AACA,WAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaC,MAAjC,EAAyCF,CAAC,EAA1C,EAA8C;AAC1C,YAAIL,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,EAAgB5B,SAAhB,IAA6BA,SAAjC,EAA4C;AACxCyB,UAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,CAAZ;AACAI,UAAAA,OAAO,GAAGT,GAAG,CAACI,IAAJ,CAASE,GAAT,CAAaD,CAAb,CAAV;AACAM,UAAAA,UAAU;AACVC,UAAAA,QAAQ;AACX;AACJ;AACJ,KAXL;AAaH,GAjGQ,CAmGT;;;AACA,MAAIJ,IAAI,GAAG,EAAX;;AACA,WAASG,UAAT,GAAsB;AAClBH,IAAAA,IAAI,oDAEMC,OAAO,CAAC9B,SAFd,2KAMgC8B,OAAO,CAACI,KANxC,kLAUgCJ,OAAO,CAACK,SAVxC,qNAemBL,OAAO,CAACM,IAAR,IAAc,CAAd,GAAgB,QAAhB,GAAyBN,OAAO,CAACM,IAAR,IAAc,CAAd,GAAgB,UAAhB,GAA2B,UAfvE,gBAesFN,OAAO,CAACM,IAAR,IAAc,CAAd,GAAgB,IAAhB,GAAqBN,OAAO,CAACM,IAAR,IAAc,CAAd,GAAgB,IAAhB,GAAqB,IAfhI,0GAkBgBN,OAAO,CAAC7B,OAlBxB,wWA0BgC6B,OAAO,CAACO,UA1BxC,4eAsCgCP,OAAO,CAACQ,YAtCxC,uJA0CYR,OAAO,CAACS,aA1CpB,wEAAJ;AA6CAtB,IAAAA,iBAAiB;AACpB;;AAEDc,EAAAA,eAAe,GAtJN,CAwJT;AACA;;AACAvC,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAaW,EAAb,CAAgB,OAAhB,EAAwB,YAAU;AAC9BX,IAAAA,CAAC,CAAC,SAAD,CAAD,CAAagD,KAAb;AACH,GAFD,EA1JS,CA8JT;;AACAhD,EAAAA,CAAC,CAAC,SAAD,CAAD,CAAaiD,MAAb,CAAoB,UAASC,CAAT,EAAW;AAC3BlD,IAAAA,CAAC,CAAC,SAAD,CAAD,CAAac,GAAb,CAAiB,SAAjB,EAA2B,MAA3B;AACAd,IAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBc,GAAhB,CAAoB,SAApB,EAA8B,OAA9B;AACA,QAAIqC,OAAO,GAAG;AAACA,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB;AAAV,KAAd;AACA,QAAIC,IAAI,GAAGF,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf,CAAX;AACAC,IAAAA,IAAI,GAAG,IAAIC,QAAJ,EAAP,CAL2B,CAKL;;AACtBD,IAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAmBL,IAAnB,EAN2B,CAMF;AACzB;;AACA1B,IAAAA,KAAK,CAACC,IAAN,2DAAoE4B,IAApE,EAAyEJ,OAAzE,EAAkFvB,IAAlF,CACI,UAAAC,GAAG,EAAI;AACH;AACA7B,MAAAA,CAAC,CAAC,SAAD,CAAD,CAAa0D,IAAb,CAAkB,KAAlB,EAAwB7B,GAAG,CAACI,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiB0B,UAAzC;AACA3D,MAAAA,CAAC,CAAC,SAAD,CAAD,CAAac,GAAb,CAAiB,SAAjB,EAA2B,OAA3B;AACAd,MAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBc,GAAhB,CAAoB,SAApB,EAA8B,MAA9B;AACAL,MAAAA,OAAO,GAAGoB,GAAG,CAACI,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiB0B,UAA3B;AACH,KAPL;AASH,GAjBD,EA/JS,CAkLT;;AACA3D,EAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBW,EAAzB,CAA4B,OAA5B,EAAoC,UAASC,KAAT,EAAe;AAC/CA,IAAAA,KAAK,CAACC,eAAN;AACAL,IAAAA,SAAS,GAAGR,CAAC,CAAC,2BAAD,CAAD,CAA+B4D,GAA/B,EAAZ;AACAlC,IAAAA,KAAK,CAACC,IAAN,wEAA2EpB,eAA3E,wBAAwGD,SAAxG,4BAAmIL,GAAnI,wBAAoJO,SAApJ,sBAAyKC,OAAzK,0BAAgMC,WAAhM,GAA+MkB,IAA/M,CACI,UAAAC,GAAG,EAAI;AACHE,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAhB;;AACA,UAAIJ,GAAG,CAACI,IAAJ,CAASE,GAAT,IAAgB,WAApB,EAAiC;AAC7Bf,QAAAA,QAAQ,GAAG,4BAAX;AACH,OAFD,MAEO;AACHyC,QAAAA,KAAK,gEAAL;AACH;AACJ,KARL;AAUH,GAbD;AAcA7D,EAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBW,EAAzB,CAA4B,OAA5B,EAAoC,UAASC,KAAT,EAAe;AAC/CA,IAAAA,KAAK,CAACC,eAAN;AACAkB,IAAAA,OAAO,CAACC,GAAR;AACAhC,IAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBc,GAAtB,CAA0B,SAA1B,EAAoC,MAApC;AACH,GAJD,EAjMS,CAuMT;;AACA,WAAS2B,QAAT,GAAoB;AAChB,QAAIrC,IAAI,IAAI,CAAZ,EAAe;AACXJ,MAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBqC,IAAhB,2LAKgBC,OAAO,CAACO,UALxB,+BAOEiB,QAPF,CAOW,cAPX;AAQA9D,MAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBc,GAAzB,CAA6B,SAA7B,EAAuC,OAAvC;AACAd,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBc,GAApB,CAAwB,SAAxB,EAAkC,MAAlC;AACH,KAXD,MAWO,IAAIV,IAAI,IAAI,CAAZ,EAAe;AAClBJ,MAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBqC,IAAhB,2LAKgBC,OAAO,CAACO,UALxB,+BAOEiB,QAPF,CAOW,cAPX;AAQH,KATM,MASA,IAAI1D,IAAI,IAAI,CAAZ,EAAe;AAClBJ,MAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBqC,IAAhB,2LAKgBC,OAAO,CAACO,UALxB,+BAOEiB,QAPF,CAOW,aAPX;AAQA9D,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBc,GAApB,CAAwB,SAAxB,EAAkC,MAAlC;AACH;AACJ,GAxOQ,CA0OT;;;AACAd,EAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BW,EAA1B,CAA6B,OAA7B,EAAqC,UAASC,KAAT,EAAe;AAChDA,IAAAA,KAAK,CAACC,eAAN;AACAH,IAAAA,WAAW,GAAG,CAAd;AACAV,IAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBc,GAAjB,CAAqB,SAArB,EAA+B,OAA/B;AACH,GAJD;AAKAd,EAAAA,CAAC,CAAC,yBAAD,CAAD,CAA6BW,EAA7B,CAAgC,OAAhC,EAAwC,UAASC,KAAT,EAAe;AACnDA,IAAAA,KAAK,CAACC,eAAN;AACAH,IAAAA,WAAW,GAAG,CAAd;AACAV,IAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBc,GAAjB,CAAqB,SAArB,EAA+B,OAA/B;AACH,GAJD,EAhPS,CAsPT;;AACAd,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBW,EAApB,CAAuB,OAAvB,EAA+B,YAAU;AACrCX,IAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBgD,KAApB;AACH,GAFD,EAvPS,CA2PT;;AACAhD,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBiD,MAApB,CAA2B,UAASC,CAAT,EAAW;AAClClD,IAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBc,GAApB,CAAwB,SAAxB,EAAkC,MAAlC;AACAd,IAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBc,GAAvB,CAA2B,SAA3B,EAAqC,OAArC;AACA,QAAIqC,OAAO,GAAG;AAACA,MAAAA,OAAO,EAAE;AAAC,wBAAgB;AAAjB;AAAV,KAAd;AACA,QAAIC,IAAI,GAAGF,CAAC,CAACG,MAAF,CAASC,KAAT,CAAe,CAAf,CAAX;AACAC,IAAAA,IAAI,GAAG,IAAIC,QAAJ,EAAP,CALkC,CAKZ;;AACtBD,IAAAA,IAAI,CAACE,MAAL,CAAY,MAAZ,EAAmBL,IAAnB,EANkC,CAMT;AACzB;;AACA1B,IAAAA,KAAK,CAACC,IAAN,2DAAoE4B,IAApE,EAAyEJ,OAAzE,EAAkFvB,IAAlF,CACI,UAAAC,GAAG,EAAI;AACH;AACA7B,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0D,IAApB,CAAyB,KAAzB,EAA+B7B,GAAG,CAACI,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiB0B,UAAhD;AACA3D,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBc,GAApB,CAAwB,SAAxB,EAAkC,OAAlC;AACAd,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBc,GAAvB,CAA2B,SAA3B,EAAqC,MAArC;AACAL,MAAAA,OAAO,GAAGoB,GAAG,CAACI,IAAJ,CAASA,IAAT,CAAc,CAAd,EAAiB0B,UAA3B;AACH,KAPL;AASH,GAjBD,EA5PS,CA+QT;;AACA3D,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBW,EAApB,CAAuB,OAAvB,EAA+B,UAASC,KAAT,EAAe;AAC1CA,IAAAA,KAAK,CAACC,eAAN;AACAL,IAAAA,SAAS,GAAGR,CAAC,CAAC,sBAAD,CAAD,CAA0B4D,GAA1B,EAAZ;AACAlC,IAAAA,KAAK,CAACC,IAAN,kEAAqEpB,eAArE,wBAAkGD,SAAlG,4BAA6HL,GAA7H,wBAA8IO,SAA9I,sBAAmKC,OAAnK,0BAA0LC,WAA1L,GAAyMkB,IAAzM,CACI,UAAAC,GAAG,EAAI;AACHE,MAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAhB;;AACA,UAAIJ,GAAG,CAACI,IAAJ,CAASE,GAAT,IAAgB,OAApB,EAA6B;AACzBf,QAAAA,QAAQ,GAAG,4BAAX;AACH,OAFD,MAEO;AACHyC,QAAAA,KAAK,gEAAL;AACH;AACJ,KARL;AAUH,GAbD;AAcA7D,EAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoBW,EAApB,CAAuB,OAAvB,EAA+B,UAASC,KAAT,EAAe;AAC1CA,IAAAA,KAAK,CAACC,eAAN;AACAkB,IAAAA,OAAO,CAACC,GAAR;AACAhC,IAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBc,GAAjB,CAAqB,SAArB,EAA+B,MAA/B;AACH,GAJD;AAKH,CAnSA,CAAD","file":"qualityParticulars.6be09f0a.map","sourceRoot":"..","sourcesContent":["$(function (){\r\n    let pid = localStorage.getItem('pid')\r\n\r\n    // 提交整改所需数据\r\n    let type = getQueryString('type')                       // 表单状态\r\n    let pollingId = getQueryString('pollingId')             // 发起整改id\r\n    let pollingDetailId = getQueryString('pollingDetailId') // 整改流程id\r\n    let describex = ''                                      // 整改描述\r\n    let fileUrl = ''                                        // 照片路径\r\n    let isAvailable = ''                                    // 整改单状态\r\n\r\n    // console.log(`123`)\r\n    // 整改点击事件\r\n    $('.abarbeitung-button').on('click',function(event){\r\n        event.stopPropagation()\r\n        isAvailable = 1\r\n        $('.abarbeitung-box').css('display','block')\r\n    })\r\n\r\n    // 获取整改单id\r\n    function getQueryString(name) {\r\n        let reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n        let r = window.location.search.substr(1).match(reg);\r\n        if (r != null) {\r\n            return unescape(r[2]);\r\n        }\r\n        return null;\r\n    }\r\n\r\n    // 获取整改单详情页\r\n    function getQueryPollingIs() {\r\n        // 获取url中的整改单id\r\n        // console.log(pollingId)\r\n        axios.post(`http://39.108.103.150:8989/lz/polling/queryPollingIs?pollingId=${pollingId}&type=${type}`).then(\r\n            res => {\r\n                let number = 1\r\n                console.log(res.data)\r\n                for (let i = 0; i < res.data.msg.length; i++) {\r\n                    if (res.data.msg[i].isAvailable == 2 || res.data.msg[i].isAvailable == 1) {                    \r\n                        html += \r\n                            `<div class=\"title\">\r\n                                第${number}次整改\r\n                            </div>\r\n                            <div class=\"describe\">\r\n                                <p>整改结果</p>\r\n                                <span>${res.data.msg[i].describex}</span>\r\n                            </div>\r\n                            <div class=\"name\">\r\n                                整改后照片\r\n                            </div>\r\n                            <div class=\"pic-box\" style=\"margin-bottom: .175rem\">\r\n                                <img src=\"${res.data.msg[i].fileUrl}\" alt=\"\">\r\n                            </div>`\r\n                            number++\r\n                    }\r\n                    if (res.data.msg[i].isAvailable == 6 || res.data.msg[i].isAvailable == 5) {\r\n                        html += \r\n                            `<div class=\"justify\">\r\n                                <span>复查人</span>\r\n                                <span class=\"white-color\">某某某</span>\r\n                            </div>\r\n                            <div class=\"justify\">\r\n                                <span>复查意见</span>\r\n                                <span class=\"white-color\">${res.data.msg[i].isAvailable == 6?'不通过':'通过'}</span>\r\n                            </div>\r\n                            <div class=\"name\">\r\n                                复查后照片\r\n                            </div>\r\n                            <div class=\"pic-box\" style=\"margin-bottom: .25rem\">\r\n                                <img src=\"${res.data.msg[i].fileUrl}\" alt=\"\">\r\n                            </div>\r\n                            <div class=\"line\"></div>`\r\n                    }\r\n                }\r\n                $('.centent-box').html(html)\r\n            }\r\n        )\r\n    }\r\n\r\n    // 获取复查单详情页\r\n\r\n    // 获取整改单详情页数据\r\n    let polling = ''\r\n    function getQueryPolling() {        \r\n        axios.post(`http://39.108.103.150:8989/lz/polling/queryPolling?examineUserId=${pid}&type=${type}`).then(\r\n            res => {\r\n                // console.log(res.data)\r\n                for (let i = 0; i < res.data.msg.length; i++) {\r\n                    if (res.data.msg[i].pollingId == pollingId) {\r\n                        console.log(res.data.msg[i])\r\n                        polling = res.data.msg[i]\r\n                        setCentent()\r\n                        setState()\r\n                    }\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    // 渲染整改单详情页\r\n    let html = ''\r\n    function setCentent() {\r\n        html = \r\n            `<div class=\"title\">\r\n                ${polling.describex}\r\n            </div>\r\n            <div class=\"justify\">\r\n                <span>检查区域</span>\r\n                <span class=\"white-color\">${polling.place}</span>\r\n            </div>\r\n            <div class=\"justify\">\r\n                <span>分包单位</span>\r\n                <span class=\"white-color\">${polling.unitTitle}</span>\r\n            </div>\r\n            <div class=\"border-bottom\"></div>\r\n            <div class=\"justify\">\r\n                <span>问题级别</span>\r\n                <span class=\"${polling.rank==1?'slight':polling.rank==2?'ordinary':'severity'}\">${polling.rank==1?'轻微':polling.rank==2?'一般':'严重'}</span>\r\n            </div>\r\n            <div class=\"pic-box\">\r\n                <img src=\"${polling.fileUrl}\" alt=\"\">\r\n            </div>\r\n            <div class=\"justify\">\r\n                <span>检查人</span>\r\n                <span class=\"white-color\">某某某</span>\r\n            </div>\r\n            <div class=\"justify\">\r\n                <span>检查时间</span>\r\n                <span class=\"white-color\">${polling.createTime}</span>\r\n            </div>\r\n            <div class=\"line\"></div>\r\n            <div class=\"title\">\r\n                整改通知\r\n            </div>\r\n            <div class=\"justify\">\r\n                <span>整改人</span>\r\n                <span class=\"white-color\">某某某</span>\r\n            </div>\r\n            <div class=\"justify\">\r\n                <span>整改时限</span>\r\n                <span class=\"white-color\">${polling.deadlineTime}</span>\r\n            </div>\r\n            <div class=\"describe\">\r\n                <p>整改要求</p>\r\n                <span>${polling.rectification}</span>\r\n            </div>\r\n            <div class=\"line\"></div>`\r\n        getQueryPollingIs()\r\n    }\r\n\r\n    getQueryPolling()\r\n\r\n    // 上传照片信息\r\n    // 添加照片点击事件\r\n    $('.addPic').on('click',function(){\r\n        $('.camera').click()\r\n    })\r\n\r\n    // 照片上传\r\n    $(\".camera\").change(function(e){\r\n        $('.addPic').css('display','none')\r\n        $('.uploading').css('display','block')\r\n        let headers = {headers: {\"Content-Type\": \"multipart/form-data\"}}\r\n        let temp = e.target.files[0]\r\n        file = new FormData() // 创建form对象\r\n        file.append('file',temp) // 通过append向form对象添加数据\r\n        // console.log(file.get('file')) //FormData私有类对象，访问不到，可以通过get判断值是否传进去\r\n        axios.post(`http://39.108.103.150:8989/lz/file/upload?folderName=1`,file,headers).then(\r\n            res => {\r\n                // console.log(res.data.data[0].fileimgurl)\r\n                $('.addPic').attr('src',res.data.data[0].fileimgurl)\r\n                $('.addPic').css('display','block')\r\n                $('.uploading').css('display','none')\r\n                fileUrl = res.data.data[0].fileimgurl\r\n            }\r\n        )\r\n    })\r\n\r\n    // 确认取消点击事件\r\n    $('.abarbeitung-affirm').on('click',function(event){\r\n        event.stopPropagation()\r\n        describex = $('.abarbeitung-box textarea').val()\r\n        axios.post(`http://39.108.103.150:8989/lz/polling/updatePollingDetail?id=${pollingDetailId}&pollingId=${pollingId}&examineUserid=${pid}&describex=${describex}&fileUrl=${fileUrl}&isAvailable=${isAvailable}`).then(\r\n            res => {\r\n                console.log(res.data)\r\n                if (res.data.msg == '整改成功！等待审核') {\r\n                    location = '../components/quality.html'\r\n                } else {\r\n                    alert(`数据上传失败！请重试`)\r\n                }\r\n            }\r\n        )\r\n    })\r\n    $('.abarbeitung-cancel').on('click',function(event){\r\n        event.stopPropagation()\r\n        console.log(`123`)\r\n        $('.abarbeitung-box').css('display','none')\r\n    })\r\n\r\n    // 根据整改单状态渲染按钮跟头部\r\n    function setState() {\r\n        if (type == 0) {\r\n            $('.state-box').html(\r\n                `<div class=\"state\">\r\n                    待整改\r\n                </div>\r\n                <div class=\"time\">\r\n                    创建时间： ${polling.createTime}\r\n                </div>`\r\n            ).addClass('orange-color')\r\n            $('.abarbeitung-button').css('display','block')\r\n            $('.review-button').css('display','none')\r\n        } else if (type == 1) {\r\n            $('.state-box').html(\r\n                `<div class=\"state\">\r\n                    待复查\r\n                </div>\r\n                <div class=\"time\">\r\n                    创建时间： ${polling.createTime}\r\n                </div>`\r\n            ).addClass('orange-color')\r\n        } else if (type == 2) {\r\n            $('.state-box').html(\r\n                `<div class=\"state\">\r\n                    已完成\r\n                </div>\r\n                <div class=\"time\">\r\n                    创建时间： ${polling.createTime}\r\n                </div>`\r\n            ).addClass('green-color')\r\n            $('.review-button').css('display','none')\r\n        }\r\n    }\r\n\r\n    // 通过或不通过点击事件\r\n    $('.review-button .pass').on('click',function(event){\r\n        event.stopPropagation()\r\n        isAvailable = 5\r\n        $('.review-box').css('display','block')\r\n    })\r\n    $('.review-button .no-pass').on('click',function(event){\r\n        event.stopPropagation()\r\n        isAvailable = 6\r\n        $('.review-box').css('display','block')\r\n    })\r\n\r\n    // 添加照片点击事件\r\n    $('.review-addPic').on('click',function(){\r\n        $('.review-camera').click()\r\n    })\r\n\r\n    // 照片上传\r\n    $(\".review-camera\").change(function(e){\r\n        $('.review-addPic').css('display','none')\r\n        $('.review-uploading').css('display','block')\r\n        let headers = {headers: {\"Content-Type\": \"multipart/form-data\"}}\r\n        let temp = e.target.files[0]\r\n        file = new FormData() // 创建form对象\r\n        file.append('file',temp) // 通过append向form对象添加数据\r\n        // console.log(file.get('file')) //FormData私有类对象，访问不到，可以通过get判断值是否传进去\r\n        axios.post(`http://39.108.103.150:8989/lz/file/upload?folderName=1`,file,headers).then(\r\n            res => {\r\n                // console.log(res.data.data[0].fileimgurl)\r\n                $('.review-addPic').attr('src',res.data.data[0].fileimgurl)\r\n                $('.review-addPic').css('display','block')\r\n                $('.review-uploading').css('display','none')\r\n                fileUrl = res.data.data[0].fileimgurl\r\n            }\r\n        )\r\n    })\r\n\r\n    // 确认取消点击事件\r\n    $('.review-affirm').on('click',function(event){\r\n        event.stopPropagation()\r\n        describex = $('.review-box textarea').val()\r\n        axios.post(`http://39.108.103.150:8989/lz/polling/updatePolling?id=${pollingDetailId}&pollingId=${pollingId}&examineUserid=${pid}&describex=${describex}&fileUrl=${fileUrl}&isAvailable=${isAvailable}`).then(\r\n            res => {\r\n                console.log(res.data)\r\n                if (res.data.msg == '审核成功！') {\r\n                    location = '../components/quality.html'\r\n                } else {\r\n                    alert(`数据上传失败！请重试`)\r\n                }\r\n            }\r\n        )\r\n    })\r\n    $('.review-cancel').on('click',function(event){\r\n        event.stopPropagation()\r\n        console.log(`123`)\r\n        $('.review-box').css('display','none')\r\n    })\r\n})"]}